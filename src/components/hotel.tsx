import { useAppSelector } from "../hooks";
import dayjs from 'dayjs';
import { Hotel } from "../types/state";

type HotelProps = {
    hotel: Hotel
    onClickFavorite: () => void;
    favorite?: boolean
}
function HotelComponent({ hotel, onClickFavorite, favorite }: HotelProps): JSX.Element {
    const { countDay, dateCheckIn } = useAppSelector(({ HOTEL }) => HOTEL);

    const getStars = () => {
        const stars = [];
        for (let i = 1; i <= 5; i++) {
            stars.push(i <= hotel.stars ?
                <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.65985 2.01548C7.19357 3.1303 6.62617 4.48729 6.39865 5.03215C6.17254 5.57553 5.98153 6.02589 5.98153 6.02589C5.98153 6.02589 5.54896 6.0628 5.0237 6.10267C4.49984 6.14254 3.54342 6.21489 2.89878 6.26362C2.25413 6.31382 1.37214 6.38027 0.939574 6.41276C0.507005 6.44524 0.117973 6.47625 0.0758401 6.48068L0 6.48954L0.0688178 6.55894C0.108142 6.59585 0.540712 7.00191 1.02946 7.46113C1.51961 7.92035 2.16144 8.52132 2.45638 8.79744C4.23581 10.466 4.64731 10.8514 4.66416 10.8647C4.68804 10.8839 4.76809 10.528 3.90295 14.2091C3.54342 15.7389 3.2527 16.9999 3.2527 16.9999C3.2527 16.9999 4.47316 16.2631 5.96047 15.3505C7.44637 14.438 8.67245 13.6938 8.68509 13.6968C8.69633 13.6997 9.24406 14.0541 9.89994 14.4823C10.5572 14.912 11.5361 15.5513 12.0768 15.9043C12.6175 16.2572 13.2158 16.6485 13.4068 16.7725C13.5964 16.898 13.7622 16.9999 13.7622 16.9999C13.7622 16.9999 13.7678 16.9748 13.7622 16.9438C13.7537 16.8936 13.1849 14.1427 12.6723 11.6753C12.5501 11.0817 12.449 10.5856 12.449 10.5723C12.449 10.5531 13.3605 9.74098 16.6581 6.81882C17.0205 6.4984 17.0247 6.49397 16.9811 6.48363C16.9559 6.47773 15.5613 6.33007 13.8815 6.15435C12.2018 5.97864 10.8142 5.8295 10.7974 5.82212C10.7763 5.81326 10.7103 5.65822 10.5179 5.16356C10.3803 4.80623 9.93926 3.66778 9.53899 2.6327C9.13873 1.59761 8.74689 0.583193 8.66824 0.380901C8.58959 0.177132 8.52218 0.00732422 8.51656 -5.91278e-05C8.51234 -0.00596619 8.12612 0.90066 7.65985 2.01548Z" fill="#CDBC1E" />
                </svg>
                :
                <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.65985 2.01554C7.19357 3.13037 6.62617 4.48735 6.39865 5.03221C6.17254 5.57559 5.98153 6.02595 5.98153 6.02595C5.98153 6.02595 5.54896 6.06287 5.0237 6.10273C4.49984 6.1426 3.54342 6.21495 2.89878 6.26368C2.25413 6.31388 1.37214 6.38033 0.939574 6.41282C0.507005 6.4453 0.117973 6.47631 0.0758401 6.48074L0 6.4896L0.0688178 6.559C0.108142 6.59591 0.540712 7.00197 1.02946 7.46119C1.51961 7.92041 2.16144 8.52138 2.45638 8.7975C4.23581 10.466 4.64731 10.8514 4.66416 10.8647C4.68804 10.8839 4.76809 10.5281 3.90295 14.2092C3.54342 15.7389 3.2527 16.9999 3.2527 16.9999C3.2527 16.9999 4.47316 16.2631 5.96047 15.3506C7.44637 14.4381 8.67245 13.6939 8.68509 13.6968C8.69633 13.6998 9.24406 14.0541 9.89994 14.4824C10.5572 14.912 11.5361 15.5514 12.0768 15.9043C12.6175 16.2572 13.2158 16.6485 13.4068 16.7725C13.5964 16.8981 13.7622 16.9999 13.7622 16.9999C13.7622 16.9999 13.7678 16.9748 13.7622 16.9438C13.7537 16.8936 13.1849 14.1427 12.6723 11.6754C12.5501 11.0818 12.449 10.5856 12.449 10.5724C12.449 10.5532 13.3605 9.74104 16.6581 6.81888C17.0205 6.49846 17.0247 6.49403 16.9811 6.48369C16.9559 6.47779 15.5613 6.33013 13.8815 6.15441C12.2018 5.9787 10.8142 5.82957 10.7974 5.82218C10.7763 5.81332 10.7103 5.65828 10.5179 5.16362C10.3803 4.80629 9.93926 3.66784 9.53899 2.63276C9.13873 1.59767 8.74689 0.583254 8.66824 0.380962C8.58959 0.177193 8.52218 0.00738525 8.51656 1.90735e-06C8.51234 -0.00590515 8.12612 0.900721 7.65985 2.01554Z" fill="#6C6845" />
                    <path d="M7.65985 2.01554C7.19357 3.13037 6.62617 4.48735 6.39865 5.03221C6.17254 5.57559 5.98153 6.02595 5.98153 6.02595C5.98153 6.02595 5.54896 6.06287 5.0237 6.10273C4.49984 6.1426 3.54342 6.21495 2.89878 6.26368C2.25413 6.31388 1.37214 6.38033 0.939574 6.41282C0.507005 6.4453 0.117973 6.47631 0.0758401 6.48074L0 6.4896L0.0688178 6.559C0.108142 6.59591 0.540712 7.00197 1.02946 7.46119C1.51961 7.92041 2.16144 8.52138 2.45638 8.7975C4.23581 10.466 4.64731 10.8514 4.66416 10.8647C4.68804 10.8839 4.76809 10.5281 3.90295 14.2092C3.54342 15.7389 3.2527 16.9999 3.2527 16.9999C3.2527 16.9999 4.47316 16.2631 5.96047 15.3506C7.44637 14.4381 8.67245 13.6939 8.68509 13.6968C8.69633 13.6998 9.24406 14.0541 9.89994 14.4824C10.5572 14.912 11.5361 15.5514 12.0768 15.9043C12.6175 16.2572 13.2158 16.6485 13.4068 16.7725C13.5964 16.8981 13.7622 16.9999 13.7622 16.9999C13.7622 16.9999 13.7678 16.9748 13.7622 16.9438C13.7537 16.8936 13.1849 14.1427 12.6723 11.6754C12.5501 11.0818 12.449 10.5856 12.449 10.5724C12.449 10.5532 13.3605 9.74104 16.6581 6.81888C17.0205 6.49846 17.0247 6.49403 16.9811 6.48369C16.9559 6.47779 15.5613 6.33013 13.8815 6.15441C12.2018 5.9787 10.8142 5.82957 10.7974 5.82218C10.7763 5.81332 10.7103 5.65828 10.5179 5.16362C10.3803 4.80629 9.93926 3.66784 9.53899 2.63276C9.13873 1.59767 8.74689 0.583254 8.66824 0.380962C8.58959 0.177193 8.52218 0.00738525 8.51656 1.90735e-06C8.51234 -0.00590515 8.12612 0.900721 7.65985 2.01554Z" fill="white" fill-opacity="0.6" />
                </svg>
            )
        }
        return stars;
    };

    return (
        <div className="hotel-container">
            <div className="hotel-information">
                {favorite
                    ? null
                    : <div className="hotel-circle">
                        <svg className="hotel-icon" width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_6_124)">
                                <path d="M15.9359 1.33499C15.1648 2.06053 12.0586 4.98008 9.03711 7.82127C6.01289 10.6596 3.11719 13.3847 2.59766 13.8722C2.07812 14.3598 1.33984 15.0534 0.957031 15.4104C0.574219 15.7702 0.202344 16.1214 0.13125 16.1939L0 16.3245L0.902344 17.3983C1.39727 17.9875 1.82109 18.4692 1.84023 18.4692C1.86211 18.4663 3.48906 16.9572 5.45781 15.1143C15.7883 5.44442 17.4562 3.88887 17.4754 3.89468C17.4863 3.90048 18.7605 5.09326 20.3082 6.54723C21.8531 8.0012 25.3449 11.2806 28.0629 13.8374C30.7809 16.3942 33.0176 18.4866 33.0312 18.4866C33.0449 18.4866 33.0641 18.4721 33.0723 18.4576C33.0859 18.4344 33.1023 18.4373 33.1297 18.4605C33.1816 18.504 33.1023 18.5911 34.0566 17.4419C34.475 16.9398 34.8578 16.4813 34.9098 16.4232L35.0027 16.3187L32.7113 14.1741C31.4508 12.9929 28.4895 10.2184 26.127 8.00991C23.7672 5.79848 20.8797 3.09659 19.7094 2.00248L17.5875 0.0145168H17.4645H17.3414L15.9359 1.33499Z" fill="#41522E" />
                                <path d="M15.6051 8.00708C14.6098 8.94157 11.859 11.5274 9.49375 13.7504L5.19531 17.7931L5.20078 26.1281L5.20898 34.4631L5.26914 34.5821C5.30195 34.6489 5.38125 34.7504 5.44414 34.8056C5.67109 35.0145 5.37852 35 9.7125 35H13.6172L13.6227 31.3056C13.6309 27.6315 13.6309 27.614 13.6883 27.4834C13.7594 27.3151 13.8961 27.17 14.0547 27.0946C14.1777 27.0336 14.1969 27.0336 17.4016 27.0249C20.9672 27.0162 20.8141 27.0104 21.0164 27.199C21.1586 27.3325 21.2379 27.4805 21.2707 27.6721C21.2926 27.7882 21.3008 28.9897 21.3008 31.4217V35L25.3586 34.9942L29.4191 34.9855L29.5012 34.9014C29.5477 34.8549 29.6242 34.7185 29.6734 34.5966L29.7637 34.3761L29.7691 26.0759L29.7746 17.7757L23.6496 12.044C20.177 8.79356 17.5 6.30932 17.4699 6.30932C17.4344 6.30642 16.7945 6.88975 15.6051 8.00708Z" fill="#41522E" />
                            </g>
                            <defs>
                                <clipPath id="clip0_6_124">
                                    <rect width="35" height="35" fill="white" />
                                </clipPath>
                            </defs>
                        </svg>
                    </div>
                }

                <div className="hotel-description">
                    <div className="hotel-name">{hotel.hotelName}</div>
                    <div className="date-arrival">{dayjs(dateCheckIn).format('DD MMMM YYYY')}</div>
                    <div className="dash"></div>
                    <div className="period">{countDay} день</div>
                    <div className="hotel-stars">{getStars()}</div>
                </div>
            </div>
            <div className="hotel-number-favorite">
                <div className={`hotel-favorite ${hotel.favorite ? 'hotel-favorite-active' : ''}`} onClick={onClickFavorite}></div>
                <div className="price-word">Price:</div>
                <div className="hotel-price">
                    {Math.trunc(Number(hotel.priceAvg))}
                    <svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.15234 8.26025H0.968262V6.95703H7.15234C7.75553 6.95703 8.25081 6.86019 8.63818 6.6665C9.02555 6.47282 9.31055 6.19889 9.49316 5.84473C9.68132 5.49056 9.77539 5.07275 9.77539 4.59131C9.77539 4.1984 9.68685 3.8221 9.50977 3.4624C9.33822 3.1027 9.05876 2.80664 8.67139 2.57422C8.28955 2.3418 7.7832 2.22559 7.15234 2.22559H4.28027V13H2.68652V0.914062H7.15234C8.06543 0.914062 8.83464 1.07178 9.45996 1.38721C10.0853 1.6971 10.5584 2.12874 10.8794 2.68213C11.2059 3.22998 11.3691 3.86084 11.3691 4.57471C11.3691 5.34945 11.2059 6.01351 10.8794 6.56689C10.5584 7.11475 10.0853 7.53532 9.45996 7.82861C8.83464 8.11637 8.06543 8.26025 7.15234 8.26025ZM7.05273 9.39746V10.709H0.968262V9.39746H7.05273Z" fill="#424242" />
                    </svg>
                </div>
            </div>
        </div >

    );
};

export default HotelComponent;